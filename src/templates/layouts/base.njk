<!DOCTYPE html>
<html lang="{{ config.language }}">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <title>
            {% block title %}
                {{ config.siteName }}
            {% endblock %}
        </title>
        <meta name="description" content="{% block meta_description %}{{ config.description }}{% endblock %}"/>
        {% block meta_keywords %}<meta name="keywords" content="{{ config.keywords or '' }}"/>{% endblock %}
        <meta name="darkreader-lock" content="true"/>
        <meta name="theme-color" content="#1747a6" media="(prefers-color-scheme: light)">
        <meta name="theme-color" content="#0d1e33" media="(prefers-color-scheme: dark)">
        <link rel="canonical" href="{{ config.baseUrl }}{{ canonical or '/' }}"/>
        {% if locales and locale and pagePath %}
            {% for loc in locales %}
                <link rel="alternate" href="{{ config.baseUrl }}{{ '/' + loc + pagePath }}" hreflang="{{ (langTags and langTags[loc]) or loc }}"/>
            {% endfor %}
            <link rel="alternate" href="{{ config.baseUrl }}{{ '/' + locale + pagePath }}" hreflang="x-default"/>
        {% endif %}
        <link rel="stylesheet" href="{{ assetBase }}/style.css"/> {% block head_extra %}{% endblock %}
        </head>
        <body>
            <header>
                <div class="site-title">
                    <a href="{{ pageBase or basePath }}/">{{ config.siteName }}</a>
                </div>
                {% if modules is defined and not module %}
                    <p class="site-module-count">{{ t.base.moduleCount | replace('{count}', modules | length) }}</p>
                {% endif %}
                <nav class="top-actions">
                    {% if IS_DEV and buildIssuesSummary and buildIssuesSummary.total > 0 %}
                        <div
                            id="__issues-banner"
                            style="background:#222;border:1px solid {% if buildIssuesSummary.errors>0 %}#e33{% else %}#d8b200{% endif
                                %};color:#eee;padding:4px 10px;font:12px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;border-radius:4px;">
                            <strong style="color:{% if buildIssuesSummary.errors>0 %}#ff6666{% else %}#ffd54a{% endif %};">
                                {% if buildIssuesSummary.errors>0 %}
                                    {{ t.issues.bannerErrors }}
                                {% else %}
                                    {{ t.issues.bannerWarnings }}
                                {% endif %}
                            </strong>
                            <span style="opacity:.8;">{{ t.issues.bannerCounts | replace('{errors}', buildIssuesSummary.errors) | replace('{warnings}', buildIssuesSummary.warnings) }}</span>
                            <a href="{{ pageBase }}/issues/" style="color:#4ea3ff;margin-left:.75rem;">{{ t.issues.bannerView }}</a>
                            <button
                                id="__issues-banner-close"
                                style="background:#444;color:#fff;border:1px solid #666;border-radius:3px;padding:0
                                    6px;margin-left:.5rem;cursor:pointer;font-size:11px;">
                                Ã—</button>
                        </div>
                        <script>
                            (function () {
                                var b = document.getElementById('__issues-banner');
                                var c = document.getElementById('__issues-banner-close');
                                if (c) {
                                    c.addEventListener('click', function () {
                                        if (b) 
                                            b.remove();
                                        
                                    });
                                }
                            })();
                        </script>
                    {% endif %}
                    {% if config.repoUrl %}
                        <a class="gh-btn" href="{% if module %}{{ config.repoUrl }}/tree/{{ config.repoBranch | default('main') }}/{{ config.contentDir }}/{{ module.slug }}{% else %}{{ config.repoUrl }}{% endif %}" target="_blank" rel="noopener" aria-label="{{ t.base.githubAriaLabel }}">
                            <svg viewbox="0 0 16 16" width="18" height="18" aria-hidden="true"><path
                                    fill="currentColor"
                                    d="M8 .2a8 8 0 0 0-2.53
                                        15.59c.4.07.55-.17.55-.38l-.01-1.33c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01
                                        1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95
                                        0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.5 7.5 0 0 1 2-.27 7.5 7.5 0 0 1 2 .27c1.53-1.04
                                        2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0
                                        .21.15.45.55.38A8 8 0 0 0 8 .2Z"/>
                            </svg>
                            <span class="label">GitHub</span>
                        </a>
                    {% endif %}
                    <div class="lang-switch" style="margin-left:0.5rem;">
                        <select id="lang-select" aria-label="{{ t.base.languageSwitchTitle }}">
                            {% for loc in locales %}
                                <option value="{{ loc }}" {% if locale==loc %} selected {% endif %}>{{ i18n[loc].meta.languageName or loc }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </nav>
            </header>
            <main>
                {% block content %}{% endblock %}
            </main>
            <footer>
                <p>&copy; 2025
                    <a href="https://github.com/LuYifei2011" target="_blank">Lu Yifei</a>
                </p>
            </footer>
            <script>
                window.__I18N = {{ (t or {}) | dump | safe }};
                window.IS_DEV = {{ IS_DEV and true or false }};
                window.PAGE_BASE = '{{ pageBase or assetBase }}';
                window.ASSET_BASE = '{{ assetBase }}';
                (function () {
                    var sel = document.getElementById('lang-select');
                    if (! sel) 
                        return;
                    
                    sel.addEventListener('change', function () {
                        var loc = sel.value;
                        try {
                            localStorage.setItem('preferred-locale', loc);
                        } catch (e) {}
                        var base = ('{{ pageBase or assetBase }}').replace(/\/$/, '').replace(/\/[A-Za-z0-9_-]+$/, '');
                        var to = base + '/' + loc + '/';
                        var localesPattern ='{{ locales | join('|') }}';
                        var m = location.pathname.match(new RegExp('/(' + localesPattern + ')/(.*)$'));
                        var rest = m && m[2]
                            ? m[2]
                            : '';
                        location.href = to + rest;
                    });
                })();
            </script>
            {% block page_scripts %}{% endblock %}
        </body>
    </html>