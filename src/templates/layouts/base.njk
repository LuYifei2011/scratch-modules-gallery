<!DOCTYPE html>
<html lang="{{ config.language }}">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <title>
            {% block title %}
                {{ config.siteName }}
            {% endblock %}
        </title>
        <meta name="description" content="{% block meta_description %}{{ config.description }}{% endblock %}"/>
        {% block meta_keywords %}<meta name="keywords" content="{{ config.keywords or '' }}"/>{% endblock %}
        <meta name="darkreader-lock" content="true"/>
        <meta name="theme-color" content="#1747a6" media="(prefers-color-scheme: light)">
        <meta name="theme-color" content="#0d1e33" media="(prefers-color-scheme: dark)">
        <link rel="canonical" href="{{ config.baseUrl }}{{ canonical or '/' }}"/>
        {% if locales and locale and pagePath %}
            {% for loc in locales %}
                <link rel="alternate" href="{{ config.baseUrl }}{{ '/' + loc + pagePath }}" hreflang="{{ (langTags and langTags[loc]) or loc }}"/>
            {% endfor %}
            <link rel="alternate" href="{{ config.baseUrl }}{{ '/' + locale + pagePath }}" hreflang="x-default"/>
        {% endif %}
        <link rel="stylesheet" href="{{ assetBase }}/style.css"/> {% block head_extra %}{% endblock %}
        </head>
        <body>
            <header>
                <div class="site-title">
                    <a href="{{ pageBase or basePath }}/">{{ config.siteName }}</a>
                </div>
                {% if modules is defined and not module %}
                    <p class="site-module-count">{{ t.base.moduleCount | replace('{count}', modules | length) }}</p>
                {% endif %}
                <nav class="top-actions">
                    {% if IS_DEV and buildIssuesSummary and buildIssuesSummary.total > 0 %}
                        <div
                            id="__issues-banner"
                            style="background:#222;border:1px solid {% if buildIssuesSummary.errors>0 %}#e33{% else %}#d8b200{% endif
                                %};color:#eee;padding:4px 10px;font:12px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;border-radius:4px;">
                            <strong style="color:{% if buildIssuesSummary.errors>0 %}#ff6666{% else %}#ffd54a{% endif %};">
                                {% if buildIssuesSummary.errors>0 %}
                                    {{ t.issues.bannerErrors }}
                                {% else %}
                                    {{ t.issues.bannerWarnings }}
                                {% endif %}
                            </strong>
                            <span style="opacity:.8;">{{ t.issues.bannerCounts | replace('{errors}', buildIssuesSummary.errors) | replace('{warnings}', buildIssuesSummary.warnings) }}</span>
                            <a href="{{ pageBase }}/issues/" style="color:#4ea3ff;margin-left:.75rem;">{{ t.issues.bannerView }}</a>
                            <button
                                id="__issues-banner-close"
                                style="background:#444;color:#fff;border:1px solid #666;border-radius:3px;padding:0
                                    6px;margin-left:.5rem;cursor:pointer;font-size:11px;">
                                Ã—</button>
                        </div>
                        <script>
                            (function () {
                                var b = document.getElementById('__issues-banner');
                                var c = document.getElementById('__issues-banner-close');
                                if (c) {
                                    c.addEventListener('click', function () {
                                        if (b) 
                                            b.remove();
                                        
                                    });
                                }
                            })();
                        </script>
                    {% endif %}
                    {% if config.repoUrl %}
                        <a class="gh-btn" href="{{ config.repoUrl }}" target="_blank" rel="noopener" aria-label="{{ t.base.githubAriaLabel }}">
                            <svg viewbox="0 0 98 96" width="18" height="18" aria-hidden="true">
                                <path
                                    fill-rule="evenodd"
                                    clip-rule="evenodd"
                                    d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362
                                        0-1.141-.08-5.052-.08-9.127-13.59
                                        2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523
                                        5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283
                                        0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1
                                        12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155
                                        3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08
                                        13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"
                                    fill="currentColor"/>
                            </svg>
                            <span class="label">GitHub</span>
                        </a>
                    {% endif %}
                    <div class="lang-switch" style="margin-left:0.5rem;">
                        <select id="lang-select" aria-label="{{ t.base.languageSwitchTitle }}">
                            {% for loc in locales %}
                                <option value="{{ loc }}" {% if locale==loc %} selected {% endif %}>{{ i18n[loc].meta.languageName or loc }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </nav>
            </header>
            <main>
                {% block content %}{% endblock %}
            </main>
            <footer>
                <p>&copy; 2025
                    <a href="https://github.com/LuYifei2011" target="_blank">Lu Yifei</a>
                </p>
            </footer>
            <script>
                window.__I18N = {{ (t or {}) | dump | safe }};
                window.IS_DEV = {{ IS_DEV and true or false }};
                window.PAGE_BASE = '{{ pageBase or assetBase }}';
                window.ASSET_BASE = '{{ assetBase }}';
                (function () {
                    var sel = document.getElementById('lang-select');
                    if (! sel) 
                        return;
                    
                    sel.addEventListener('change', function () {
                        var loc = sel.value;
                        try {
                            localStorage.setItem('preferred-locale', loc);
                        } catch (e) {}
                        var base = ('{{ pageBase or assetBase }}').replace(/\/$/, '').replace(/\/[A-Za-z0-9_-]+$/, '');
                        var to = base + '/' + loc + '/';
                        var localesPattern ='{{ locales | join('|') }}';
                        var m = location.pathname.match(new RegExp('/(' + localesPattern + ')/(.*)$'));
                        var rest = m && m[2]
                            ? m[2]
                            : '';
                        location.href = to + rest;
                    });
                })();
            </script>
            {% block page_scripts %}{% endblock %}
        </body>
    </html>